<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>
      Reducing pain with aliases &bull; Lounge&lt;C++&gt;
    </title>
    <link href="../../assets/css/all-e506c42a.css" rel="stylesheet" type="text/css" />
    <script src="../../assets/js/all-da39a3ee.js" type="text/javascript"></script>
    <link href="//assets.loungecpp.net/img/favicon.png" rel="icon" type="image/png" />
  </head>
  <body class='cpp cpp_reducing-pain-with-aliases cpp_reducing-pain-with-aliases_index'>
    <div class='page-container'>
      <header class='page-header'>
        <img alt='Lounge&lt;C++&gt;' class='page-header-logo' src='//assets.loungecpp.net/img/logo.png'>
        <h1 class='page-header-title'>
          <a href='/'>Lounge&lt;C++&gt;</a>
        </h1>
        <p>
          Less temporary, but somehow still temporary <img alt=":iiam:" src="//assets.loungecpp.net/img/emote/emot-iiam.gif" />
        </p>
      </header>
      
      <p>Anyone that has ever tried to do some template meta-programming, has likely run into the need for the <a href="http://stackoverflow.com/a/613132/46642" target="_blank">typename keyword</a>. Using type traits often involves this keyword.
      </p>
      <p><pre>// examples
      typename std::remove_const&lt;T&gt;::type
      typename std::add_lvalue_reference&lt;T&gt;::type
      typename std::conditional&lt;std::is_const&lt;T&gt;::value, typename std::add_const&lt;U&gt;::type, T&gt;::type
      </pre>
      </p>
      <p>This makes for verbose code and quickly becomes annoying. Fortunately C++11 brings us template aliases (available on Clang 3.0 and GCC 4.7). With these one can make these things much less of an eye sore.
      </p>
      <p>One can capture this <code>typename T&#58;&#58;type</code> pattern with a template alias that can be used to replace it:
      </p>
      <p><pre>template &lt;typename T&gt;
      using Invoke = typename T::type;
      </pre>
      </p>
      <p>And rewrite the previous examples as:
      </p>
      <p><pre>Invoke&lt;std::remove_const&lt;T&gt;&gt;
      Invoke&lt;std::add_lvalue_reference&lt;T&gt;&gt;
      Invoke&lt;std::conditional&lt;std::is_const&lt;T&gt;::value, Invoke&lt;std::add_const&lt;U&gt;&gt;, T&gt;&gt;
      </pre>
      </p>
      <p>This already helps, but one can also go one step further by making specialised aliases for each trait.
      </p>
      <pre>template &lt;typename T&gt;
      using RemoveConst = Invoke&lt;std::remove_const&lt;T&gt;&gt;;
      
      template &lt;typename T&gt;
      using AddLvalueReference = Invoke&lt;std::add_lvalue_reference&lt;T&gt;&gt;;
      
      template &lt;typename T&gt;
      using AddConst = Invoke&lt;std::add_const&lt;U&gt;::type;
      
      template &lt;typename If, typename Then, typename Else&gt;
      using Conditional = Invoke&lt;std::conditional&lt;If::value, Then, Else&gt;&gt;;
      </pre>
      
      <p>And the previous examples becomes a lot more readable:
      </p>
      <p><pre>RemoveConst&lt;T&gt;
      AddLvalueReference&lt;T&gt;
      Conditional&lt;std::is_const&lt;T&gt;, AddConst&lt;U&gt;, T&gt;&gt;
      </pre>
      </p>
      <p>It almost doesn't look like TMP at all.
      </p>
      <footer class='page-footer'>
        <p>
          Content on Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported unless noted otherwise.
          Uses Google Analytics which sets a tracking cookie for statistical purposes (see <a href="https://www.google.com/analytics/learn/privacy.html">GA privacy policy</a>).
        </p>
        <p>
          Source lives in a <a href="https://github.com/LoungeCPP/loungecpp.net">GitHub repository</a> and is powered
          by <a href="http://middlemanapp.com/">Middleman</a>. Open a PR if you want to change anything.
        </p>
      </footer>
    </div>
    <script defer src='//www.google-analytics.com/analytics.js'></script>
    <script src="../../assets/js/analytics-0a593893.js" type="text/javascript" defer="defer"></script>
  </body>
</html>
